<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width='device-width', initial-scale=1.0">
    <title>工厂方法模式</title>
</head>

<body>
    <div id='container'></div>
    <script>
        // const JavaScript = function (content) {
        //     this.content = content;
        //     (function (content) {
        //         const container = document.querySelector('#container');
        //         const div = document.createElement('div');
        //         div.innerText = content;
        //         div.style.color = 'pink'
        //         container.appendChild(div);

        //     })(content)
        // }

        // const javascript = new JavaScript('你好JavaScript');

       const Factory = function(type, content){
           if(this instanceof Factory){
               return new this[type](content);
           } else {
               return new Factory(type, content);
           }
       }

        Factory.prototype = {
            JavaScript: function (content) {
                alert('javascript');
                this.content = content;
                (function (content) {
                    const container = document.querySelector('#container');
                    const div = document.createElement('div');
                    div.innerText = content;
                    div.style.color = 'pink'
                    container.appendChild(div);

                })(content)
            },
            Java: function (content) {
                this.content = content;
                (function (content) {
                    const container = document.querySelector('#container');
                    const div = document.createElement('div');
                    div.innerText = content;
                    div.style.color = 'blue'
                    container.appendChild(div);

                })(content)
            },
            UI: function (content) {
                this.content = content;
                (function (content) {
                    const container = document.querySelector('#container');
                    const div = document.createElement('div');
                    div.innerText = content;
                    div.style.color = 'red'
                    container.appendChild(div);

                })(content)
            },
            Php: function (content) {
                this.content = content;
                (function (content) {
                    const container = document.querySelector('#container');
                    const div = document.createElement('div');
                    div.innerText = content;
                    div.style.color = 'green'
                    container.appendChild(div);

                })(content)
            }
        }

        let factory = Factory('JavaScript', '你好JavaScript');
        console.log(factory);

        // 1、使用了安全的构造模式，当错误的方式调用也能返回正确的结果
        // 2、根据传入的type，content可以正确返回需要创建的对象
        // 3、当有新的需求来临，需要加入新的类型，可以在原形对象中添加不用多处修改




        //构造函数自行添加返回值是否会影响new后的操作   当返回object和function的时候会有影响，当返回number,boolean,null,undefined不会影响
        // function Persion(name) {
        //     this.name = name;
        // }

        // var persion = new Persion('是小檗');
        // console.log(persion);
    </script>
</body>

</html>